<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Upload Content | Pratigya Abhiyaan</title>
<style>
body {
    margin: 0;
    font-family: Arial;
    background: url('https://images.unsplash.com/photo-1711062717294-8902df8cebe3?w=900&auto=format&fit=crop&q=60&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8YmxhY2tib2FyZHxlbnwwfHwwfHx8MA%3D%3D') no-repeat bottom center;
    background-size: cover;
    min-height: 100%;   
    background-attachment: fixed; 
    color: white;
}


.sidebar {
    width:230px; height:100vh; position:fixed; top:0; left:0;
    background:rgba(0,0,0,0.6); padding-top:20px; backdrop-filter:blur(6px);
}
.sidebar h2 { color:#ecb613; text-align:center; margin-bottom:30px; }
.sidebar a { display:block; padding:12px; text-decoration:none; color:white; opacity:0.85; }
.sidebar a:hover, .active { background:rgba(236,182,19,0.25); color:#ecb613; }

.content { margin-left:250px; padding:30px; }

.card {
    width:50%; background:rgba(255,255,255,0.08); padding:20px;
    border-radius:12px; backdrop-filter:blur(6px); margin-bottom:20px;
}
.card h3 { color:#ecb613; }

input[type="file"] {
    display:block; margin:10px 0; width:100%;
}

button {
    width:100%; padding:12px; border:none; border-radius:8px;
    background:#ecb613; color:black; font-weight:bold; cursor:pointer;
}
</style>
</head>
<body>

<div class="sidebar">
    <h2>ðŸ“š Volunteer Panel</h2>
    <a href="volunteer_dashboard.html">Dashboard</a>
    <a href="manage_students.html">Manage Students</a>
    <a class="active" href="upload_content.html">Upload Content</a>
    <a href="view_submissions.html"> View Submissions</a>
    <a href="vprofile.html">Profile</a>
    <a href="logout.html">Logout</a>
</div>

<div class="content">
    <h2 style="color:#ecb613;">Upload Content</h2>

    <div class="card">
        <h3>Upload Lecture Materials</h3>
        <p>Upload PPTs, PDFs, Assignments or Videos for students.</p>
        <label for="subjectSelect">Select Subject:</label>
    <select id="subjectSelect" style="width:100%; margin:10px 0; padding:8px; border-radius:6px;">
        <option value="">Choose Subject</option>
        <option value="English">English</option>
        <option value="Hindi">hindi</option>
        <option value="Maths">Maths</option>
        <option value="Punjabi">punjabi</option>
        <option value="Science">science</option>
        <option value="Social Studies">Social Studies</option>
    </select>

       <input type="file" id="fileInput">
       <button onclick="uploadFile()">Upload Content</button>
    </div>
</div>

</body>
<script>
async function uploadFile() {
  const file = document.getElementById("fileInput").files[0];
  const subject = document.getElementById("subjectSelect").value;

  if (!subject) {
    alert("Please select a subject");
    return;
  }

  if (!file) {
    alert("Please select a file");
    return;
  }

  const formData = new FormData();
  formData.append("subject", subject);  // MUST come before file
  formData.append("file", file);

  try {
    const res = await fetch("http://localhost:4000/api/upload", {
      method: "POST",
      body: formData
    });

    const data = await res.json();
    alert(data.message);
  } catch (err) {
    console.error(err);
    alert("Upload failed. Check console for details.");
  }
}

</script>
</html>
