<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>View Students | Pratigya Abhiyaan</title>

<style>
body {
    margin: 0;
    font-family: Arial;
    background: url('https://images.unsplash.com/photo-1711062717294-8902df8cebe3?w=900&auto=format&fit=crop&q=60&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8YmxhY2tib2FyZHxlbnwwfHwwfHx8MA%3D%3D') no-repeat bottom center;
    background-size: cover;
    min-height: 100%;
    background-attachment: fixed;
    color: white;
}

.sidebar { width:230px; height:100vh; position:fixed; top:0; left:0; background:rgba(0,0,0,0.6); padding-top:20px; backdrop-filter:blur(6px); }
.sidebar h2 { text-align:center; color:#ecb613; margin-bottom:30px; }
.sidebar a { display:block; padding:12px 20px; color:white; text-decoration:none; opacity:0.85; transition:0.3s; font-size:14px; }
.sidebar a:hover, .active { background:rgba(236,182,19,0.25); color:#ecb613; border-left:3px solid #ecb613; }

.content { margin-left:250px; padding:30px; }
h2 { color:#ecb613; }
table { width:90%; border-collapse:collapse; margin-top:20px; background:rgba(0,0,0,0.45); backdrop-filter:blur(6px); }
th, td { padding:12px; border-bottom:1px solid rgba(255,255,255,0.2); text-align:left; }
th { color:#ecb613; }
button.remove-btn { padding:6px 10px; border:none; border-radius:8px; background:#ff5050; color:white; cursor:pointer; }
</style>
</head>

<body>

<div class="sidebar">
    <h2>ðŸ“š Volunteer Panel</h2>
    <a href="volunteer_dashboard.html">Dashboard</a>
    <a href="manage_students.html" class="active">Manage Students</a>
    <a href="upload_content.html">Upload Content</a>
    <a href="view_submissions.html">View Submissions</a>
    <a href="vprofile.html">Profile</a>
    <a href="#" onclick="confirmLogout()">Logout</a>
</div>

<div class="content">
    <h2>ðŸ“„ View Students</h2>

    <table>
        <thead>
            <tr>
                <th>Name</th>
                <th>Father</th>
                <th>DOB</th>
                <th>Address</th>
                <th>Phone</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody id="studentTable"></tbody>
    </table>
</div>


<script>
async function loadStudents() {
    const res = await fetch("http://localhost:4000/students/all");
    const students = await res.json();

    let rows = "";
    students.forEach(s => {
        rows += `
        <tr>
            <td>${s.name}</td>
            <td>${s.father}</td>
            <td>${s.dob}</td>
            <td>${s.address}</td>
            <td>${s.phone}</td>
            <td>
              <button class="remove-btn" onclick="removeStudent('${s._id}')">
                Remove
              </button>
            </td>
        </tr>`;
    });

    document.getElementById("studentTable").innerHTML = rows;
}



async function removeStudent(id) {
    if (confirm("Are you sure you want to delete this student?")) {
        const res = await fetch(`http://localhost:4000/students/delete/${id}`, {
            method: "DELETE"
        });

        const data = await res.json();
        alert(data.message);
        loadStudents(); 
    }
}

function confirmLogout() {
    if (confirm("Are you sure you want to logout?")) {
        window.location.href = "logout.html";
    }
}

loadStudents();
</script>

</body>
</html>
