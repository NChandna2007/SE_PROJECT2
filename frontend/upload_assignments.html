<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Upload Assignment | Pratigya Abhiyaan</title>

<style>
    body {
        margin: 0; font-family: Arial; color: white;
        background: url('https://plus.unsplash.com/premium_photo-1750137405605-906144d54bf0?q=80&w=774&auto=format&fit=crop');
        background-size: cover; backdrop-filter: blur(5px);
    }
    .sidebar { width: 230px; height: 100vh; position: fixed;
        background: rgba(0,0,0,0.6); padding-top: 20px;
        backdrop-filter: blur(6px); }
    .sidebar h2 { text-align: center; color: #ecb613; }
    .sidebar a { display: block; padding: 12px 20px; color: white; opacity: .85; text-decoration: none; }
    .sidebar a:hover, .active { background: rgba(236,182,19,.25); color: #ecb613; border-left: 3px solid #ecb613; }

    .content { margin-left: 240px; padding: 30px; }
    .box {
        background: rgba(255,255,255,0.08); padding: 25px;
        border-radius: 12px; backdrop-filter: blur(6px);
        width: 60%; margin-top: 20px;
    }
    h3 { color: #ecb613; }
    input, select {
        width: 100%; padding: 10px; margin: 10px 0;
        border-radius: 6px; border: none;
    }
    button {
        width: 100%; padding: 12px; background: #ecb613;
        border: none; color: black; font-weight: bold;
        border-radius: 8px; cursor: pointer; font-size: 15px;
    }
</style>

</head>
<body>

<div class="sidebar">
    <h2>Student Panel</h2>
    <a href="dashboard.html"> Dashboard</a>
    <a href="courses.html">Courses / Modules</a>
    <a href="assignments.html">Assignments</a>
    <a class="active" href="upload_assignments.html">Upload Assignment</a>
     <a  href="view_grades.html"> View Grades</a>
    <a href="profile.html">Profile</a>
    <a href="logout.html"> Logout</a>
</div>

<div class="content">
    <h2>ðŸ“¤ Upload Your Assignment</h2>

<form id="uploadForm" enctype="multipart/form-data">
    <label>Select Assignment:</label>
    <select name="assignmentName">
        <option>English Project</option>
        <option>Math Worksheet</option>
        <option>Science Report</option>
    </select>

    <label>Upload File:</label>
    <input type="file" name="file" required>

    <button type="submit">Submit Assignment</button>
</form>

<script>
document.getElementById("uploadForm").addEventListener("submit", async (e) => {
    e.preventDefault();

    const formData = new FormData();

    const fileInput = document.querySelector('input[type="file"]');
    const assignmentName = document.querySelector('select').value;

    if (!fileInput.files.length) {
        alert("Please select a file");
        return;
    }

    formData.append("file", fileInput.files[0]);
    formData.append("assignmentName", assignmentName);

    // âœ… HARDCODED STUDENT (SAFE)
    formData.append("studentId", "667788999");
    formData.append("studentName", "Riya Sharma");

    try {
        const res = await fetch("http://localhost:4000/upload-assignment", {
            method: "POST",
            body: formData
        });

        const data = await res.json();

        if (!res.ok) {
            throw new Error(data.message || "Upload failed");
        }

        alert(data.message);
        document.getElementById("uploadForm").reset();

    } catch (err) {
        console.error(err);
        alert("Upload failed: " + err.message);
    }
});
</script>

</html>
